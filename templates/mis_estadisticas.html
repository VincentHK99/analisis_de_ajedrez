{% extends 'base.html' %}
{% block body %}

<form class="time_control_select" action="http://localhost:5000/mis_estadisticas" method = 'POST'>
  <input class="btn-check" type="radio" id="900+10" name="time_control" value="900+10" autocomplete="off" checked>
  <label class="btn btn-secondary" for="900+10">15+10</label>
  <input class="btn-check" type="radio" id="600" name="time_control" value="600" autocomplete="off">
  <label class="btn btn-secondary" for="600">10</label>
  <input class="btn-check" type="radio" id="300+5" name="time_control" value="300+5" autocomplete="off">
  <label class="btn btn-secondary" for="300+5">5+5</label>
  <input class="btn-check" type="radio" id="300" name="time_control" value="300" autocomplete="off">
  <label class="btn btn-secondary" for="300">5</label>
  <input class="btn-check" type="radio" id="180" name="time_control" value="180" autocomplete="off">
  <label class="btn btn-secondary" for="180">3</label>
  <input class="btn-check" type="radio" id="120+1" name="time_control" value="120+1" autocomplete="off">
  <label class="btn btn-secondary" for="120+1">2+1</label>
  <input class="btn-check" type="radio" id="60" name="time_control" value="60" autocomplete="off">
  <label class="btn btn-secondary" for="60">1</label>
  <input class="btn btn-primary" type = "submit" value = "submit" />
</form>
<div>
    <canvas id="myChart"></canvas>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const labels = JSON.parse('{{ data.index.to_list()|tojson }}');
    const win_data = JSON.parse("{{ data['Win'].to_list()|tojson }}")
    const loss_data = JSON.parse("{{ data['Loss'].to_list()|tojson }}")
    const draw_data = JSON.parse("{{ data['Draw'].to_list()|tojson }}")
  
    const data = {
      labels: labels,
      datasets: [
        {
          label: 'Win',
          data: win_data,
          backgroundColor: 'rgb(85,161,148)'
          
        },
        {
          label: 'Loss',
          data: loss_data,
          backgroundColor: 'rgb(241,106,111)'
        
        },        
        {
          label: 'Draw',
          data: draw_data,
          backgroundColor: 'rgb(152,160,166)'
        },
      ]
    };
    let delayed;
    const config = {
        type: 'bar',
        data: data,
        options: {
          indexAxis: 'y',
          plugins: {
            title: {
              display: true,
              text: 'Game Results Over Time'
            },
          },
          responsive: true,
          scales: {
            x: {
              stacked: true,
            },
            y: {
              stacked: true
            }
          }
        }
        };

</script>
  
<script>
    const myChart = new Chart(
      document.getElementById('myChart'),
      config
    );
</script>
<hr />
<div>
  <canvas id="myChart2"></canvas>
</div>
<script>
  const labels2 = JSON.parse('{{ opening_data.index.to_list()|tojson }}');
  const win_data2 = JSON.parse("{{ opening_data['Win'].to_list()|tojson }}")
  const loss_data2 = JSON.parse("{{ opening_data['Loss'].to_list()|tojson }}")
  const draw_data2 = JSON.parse("{{ opening_data['Draw'].to_list()|tojson }}")

  const data2 = {
    labels: labels2,
    datasets: [
      {
        label: 'Win',
        data: win_data2,
        backgroundColor: 'rgb(85,161,148)'
        
      },
      {
        label: 'Loss',
        data: loss_data2,
        backgroundColor: 'rgb(241,106,111)'
      
      },        
      {
        label: 'Draw',
        data: draw_data2,
        backgroundColor: 'rgb(152,160,166)'
      },
    ]
  };
  let delayed2;
  const config2 = {
      type: 'bar',
      data: data2,
      options: {
        indexAxis: 'y',
        plugins: {
          title: {
            display: true,
            text: 'Game Results Over Time'
          },
        },
        responsive: true,
        scales: {
          x: {
            stacked: true,
          },
          y: {
            stacked: true
          }
        }
      }
      };

</script>

<script>
    const myChart2 = new Chart(
      document.getElementById('myChart2'),
      config2
    );
</script>
  
{% endblock %}